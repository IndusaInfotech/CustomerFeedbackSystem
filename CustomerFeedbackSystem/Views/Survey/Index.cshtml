
@{
    ViewData["Title"] = "Home Page";
}

<style>
    .modal-title{
        font-weight:bold;
    }
    #scode{
        text-align:center;
        color:yellow;
        font-weight:bold;
        margin-top:20px;
       
    }
</style>

<div class="row mb-2">
    <!--<div class="col-sm-6">
                <h1>SURVEYS</h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item active">SURVEYS</li>
                </ol>
            </div>-->
</div>

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">


                <div class="card">
                    <div class="card-header bg-light">
                        <h2 class="card-title ">SURVEYS</h2>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                        <table id="example1" class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Title</th>
                                    <th>Page Number</th>
                                    <th>Status</th>
                                    <th>Action</th>
                              

                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in ViewBag.SurveyData)
                                {
                                <tr>
                                    <input id="text" type="text" value="/Question/Survey?SurveyId=@item.Id" style="width:80%; display:none" />
                                       @* <td>
                                            <img src="~/images/@item.Images"
                                             class="rounded-circle"
                                             height="40" width="40"
                                              />
                                        </td>*@
                                    <td>@item.Name</td>
                                    <td>@item.Description</td>
                                    <td>@item.Title</td>
                                    <td>@item.NumberOfPage</td>
                                    <td>@item.IsActive</td>
                                     <td>
                                            <button type="button" class="btn " data-toggle="modal" data-target="#exampleModal" >
                                                <a href="/Question/Welcome?SurveyId=@item.Id" title="View Survey">
                                                    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#795548"><rect fill="none" height="24" width="24"></rect><path d="M9.5,6.5v3h-3v-3H9.5 M11,5H5v6h6V5L11,5z M9.5,14.5v3h-3v-3H9.5 M11,13H5v6h6V13L11,13z M17.5,6.5v3h-3v-3H17.5 M19,5h-6v6 h6V5L19,5z M13,13h1.5v1.5H13V13z M14.5,14.5H16V16h-1.5V14.5z M16,13h1.5v1.5H16V13z M13,16h1.5v1.5H13V16z M14.5,17.5H16V19h-1.5 V17.5z M16,16h1.5v1.5H16V16z M17.5,14.5H19V16h-1.5V14.5z M17.5,17.5H19V19h-1.5V17.5z M22,7h-2V4h-3V2h5V7z M22,22v-5h-2v3h-3v2 H22z M2,22h5v-2H4v-3H2V22z M2,2v5h2V4h3V2H2z"></path></svg>
                                               </a>
                                            </button>
                                           <a href="#" title="View Survey Report"> <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#448AFF"><g><rect fill="none" height="24" width="24"></rect></g><g><g><path d="M21,8c-1.45,0-2.26,1.44-1.93,2.51l-3.55,3.56c-0.3-0.09-0.74-0.09-1.04,0l-2.55-2.55C12.27,10.45,11.46,9,10,9 c-1.45,0-2.27,1.44-1.93,2.52l-4.56,4.55C2.44,15.74,1,16.55,1,18c0,1.1,0.9,2,2,2c1.45,0,2.26-1.44,1.93-2.51l4.55-4.56 c0.3,0.09,0.74,0.09,1.04,0l2.55,2.55C12.73,16.55,13.54,18,15,18c1.45,0,2.27-1.44,1.93-2.52l3.56-3.55 C21.56,12.26,23,11.45,23,10C23,8.9,22.1,8,21,8z"></path><polygon points="15,9 15.94,6.93 18,6 15.94,5.07 15,3 14.08,5.07 12,6 14.08,6.93"></polygon><polygon points="3.5,11 4,9 6,8.5 4,8 3.5,6 3,8 1,8.5 3,9"></polygon></g></g></svg></a>
                                            <a href="/Question/AddQuestion?SurveyId=@item.Id" title="View Survey"> <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#388E3C"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"></path></svg></a>
                                           <a href="/Survey/AddSurvey/@item.Id" title="Edit"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FF9800"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"></path></svg></a>
                                           <a href="/Survey/Delete/@item.Id" title="Delete Survey" onclick="return confirm('Are you sure you want to delete survey :@item.Name')"> <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#D50000"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"></path></svg></a>
                                 
                                     </td>
                                </tr>
                                }
                            
                              
                              
                              
                            </tbody>


                        </table>
                    </div>
                    <!-- /.card-body -->
                </div>
            </div>
        </div>
    </div>
</section>



<!-- Button trigger modal -->


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Qr Print</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-5"  style="background: linear-gradient(226.8deg, #42E695 0%, #36CE83 53.03%, #2BA6AC 100%); height:350px">
              
                <center>  <div id="qrcode"></div></center>

                <p id="scode">SCAN ABOVE CODE</p>

            </div>
         

                <center> <a id='qrdl' type="button" class="btn btn-lg btn-primary mt-3" hidden>Download</a></center>
            <div class="pb-3">

            </div>
        </div>
    </div>
</div>



    


<script src="https://cdn.jsdelivr.net/npm/davidshimjs-qrcodejs@0.0.2/qrcode.min.js"></script>





<script>
const makeQR = (url, filename) => {
  var qrcode = new QRCode("qrcode", {
   text: "https://www.youtube.com/",
    width: 210,
    height: 210,
          
    colorDark: "#000000",
    colorLight: "#ffffff",
  
    correctLevel: QRCode.CorrectLevel.H
  });
  qrcode.makeCode(url);

  setTimeout(() => {
            let qelem = document.querySelector('#qrcode img')
    let dlink = document.querySelector('#qrdl')
    let qr = qelem.getAttribute('src');
    dlink.setAttribute('href', qr);
            dlink.setAttribute('download', 'filename');
    dlink.removeAttribute('hidden');
  }, 500);
}

makeQR(document.querySelector('#text').value, 'qr-code.png')
</script>
